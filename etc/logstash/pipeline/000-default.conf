input {
  beats {
    port => "5044"
  }
}

filter {
  grok {
    patterns_dir => ["/usr/share/logstash/patterns"]
    match => { "message" => "%{INGRESSNGINX}"}
  }

  if "_grokparsefailure" in [tags] {
    drop { }
  }
}

output {
  stdout {
    codec => rubydebug
  }
}
